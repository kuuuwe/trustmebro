---
title: "inspect SGICs"
output: rmarkdown::html_vignette
description: >
  This vingette shows you how to use the package for checking SGIcs and related survey data on plausibility
vignette: >
  %\VignetteIndexEntry{inspect_sgics}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

When using SGICs (Subject Generated ID-Codes) to link survey data from different sources, it's crucial to validate these identifiers to ensure accurate data cleaning and finally perform reliable data linkage. This vingette shows you:

-   How to perform plausibility checks on different SGIC components.

-   How to perform plausibility checks on non-SGIC variables that may serve as additional identifiers.

-   How to detect duplicate cases using a combination of variables as unique identifiers.

We`ll start by loading trustmebro and dplyr:

```{r setup, message=FALSE}
library(trustmebro)
library(dplyr)
```

# Data: sailor_students

The survey data we use is the `trustmebro::sailor_students` dataset. It contains fictional student assessment data from students of the sailor moon universe.

```{r}
sailor_students
```

# SGIC Plausibility

The variable `sgic` holds the SGICs created by students. Students were instructed to create a string of seven characters consisting of three characters, namely:

-   First letter of given name (1st character)
-   Last letter of given name (2nd character)
-   First letter of family name (3rd character)

Followed by:

-   Birthday (4th and 5th character)
-   Birthmonth (6th and 7th character)

## Check character ID

We can use `trustmebro::inspect_characterid` to check if the provided SGICs adhere to the expected pattern of three letters followed by four digits. The expected structure can be defined using the regular expression `"^[A-Za-z]{3}[0-9]{4}$"`, which we can then pass to the function using the `pattern =` argument.
For seamless integration into your data workflow, this function can be conveniently combined with `dplyr::mutate`:

```{r}
sailor_students %>% 
  mutate(structure_check = 
           inspect_characterid(
             sgic, pattern = "^[A-Za-z]{3}[0-9]{4}$")) %>%
  select(sgic, structure_check)
```

